<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

    <link type="text/css" rel="stylesheet" href="//www.gstatic.com/freebase/suggest/4_2/suggest.min.css" />
    <script type="text/javascript" src="/js/typeahead.bundle.js"></script>
    <link rel="stylesheet" href="/css/suggest.css">
    <script type="text/javascript" src="/js/suggest.js"></script>
    <script type="text/javascript">
      $(function() {
      $("#artist").typeahead(
        {
          highlight: true
        },
        {
          source: musicSuggester.ttAdapter(),
          displayKey: 'displayName',
          templates: {
            suggestion: function(suggestion) { return suggestion.value.name; }
          }
        })
      });
    </script>
    <title>Songku</title>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <h1>Songku</h1>
      </div>
      <div class="row-fluid">
        <form style="padding-bottom: 1cm;">
          <div class="form-group">
            <label for="artist">Artist</label>
            <input type="text" class="form-control" id="artist" name="artist" placeholder="Enter artist name" value="{{ artist }}">
          </div>
          <button type="submit" class="btn btn-default">Get haiku</button>
        </form>
      </div>
      {% if haikus %}
      {% for haiku in haikus %}
      <div class="row-fluid">
        <div class="col-md-12">
          <p class="lead">
            {% for line in haiku %}
            {{ line }}<br>
            {% endfor %}
          </p>
        </div>
      </div>
      {% endfor %}
      {% else %}
      <div class="row-fluid">
        <p class="lead">
          Sorry, I couldn't find any haikus.
        </p>
      </div>
      {% endif %}
      {% if debug %}
      <h2>Debug info</h2>
      <div class="row-fluid">
        <div class="col-md-12">
          <table class="table">
            <tr><th># syllables</th><th>Track name</th></tr>
            {% for track in tracks %}
            <tr><td>{{ track.syllables }}</td><td>{{ track.name }}</td></tr>
            {% endfor %}
          </table>
        </div>
      </div>
      {% endif %}
    </div>
  </body>
</html>
